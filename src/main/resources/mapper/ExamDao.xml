<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dimple.dao.ExamDao">

    <resultMap type="com.dimple.entity.Exam" id="ExamMap">
        <result property="examId" column="exam_id" />
        <result property="examName" column="exam_name" />
        <result property="examStartDate" column="exam_start_date" />
        <result property="examLastTime" column="exam_last_time" />
        <result property="createBy" column="create_by" />
        <result property="createDate" column="create_date" />
        <result property="updateBy" column="update_by" />
        <result property="updateDate" column="update_date" />
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="ExamMap">
        select
          exam_id, exam_name, exam_start_date, exam_last_time, create_by, create_date, update_by, update_date
        from my_exam_test.exam
        where exam_id = #{examId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="ExamMap">
        select
          exam_id, exam_name, exam_start_date, exam_last_time, create_by, create_date, update_by, update_date
        from my_exam_test.exam
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="ExamMap">
        select
          exam_id, exam_name, exam_start_date, exam_last_time, create_by, create_date, update_by, update_date
        from my_exam_test.exam
        <where>
            <if test="examId != null">
                and exam_id = #{examId}
            </if>
            <if test="examName != null and examName != ''">
                and exam_name = #{examName}
            </if>
            <if test="examStartDate != null">
                and exam_start_date = #{examStartDate}
            </if>
            <if test="examLastTime != null">
                and exam_last_time = #{examLastTime}
            </if>
            <if test="createBy != null">
                and create_by = #{createBy}
            </if>
            <if test="createDate != null">
                and create_date = #{createDate}
            </if>
            <if test="updateBy != null">
                and update_by = #{updateBy}
            </if>
            <if test="updateDate != null">
                and update_date = #{updateDate}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="examId" useGeneratedKeys="true">
        insert into my_exam_test.exam(exam_name, exam_start_date, exam_last_time, create_by, create_date, update_by, update_date)
        values (#{examName}, #{examStartDate}, #{examLastTime}, #{createBy}, #{createDate}, #{updateBy}, #{updateDate})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update my_exam_test.exam
        <set>
            <if test="examName != null and examName != ''">
                exam_name = #{examName},
            </if>
            <if test="examStartDate != null">
                exam_start_date = #{examStartDate},
            </if>
            <if test="examLastTime != null">
                exam_last_time = #{examLastTime},
            </if>
            <if test="createBy != null">
                create_by = #{createBy},
            </if>
            <if test="createDate != null">
                create_date = #{createDate},
            </if>
            <if test="updateBy != null">
                update_by = #{updateBy},
            </if>
            <if test="updateDate != null">
                update_date = #{updateDate},
            </if>
        </set>
        where exam_id = #{examId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from my_exam_test.exam where exam_id = #{examId}
    </delete>

</mapper>